function cancelOrder(t){loader.show(),ajaxCall({url:Routing.generate("cancel_order",{order:t}),dataType:"json"},function(t){if("undefined"!=typeof t.errors&&t.errors.length>0){var n="<div class='alert alert-danger'>"+Translator.trans(t.errors[0])+"</div>";showDefaultModal(Translator.trans("delete_order"),n,"","50%")}else showDefaultModal(Translator.trans("delete_order_confirmation",{num_order:t.orderNum}),t.html,"","50%");loader.hide()},null,null,!0)}var list=null;$(function(){list=initSimpleDataTable("#pending_commands_table",{lengthChange:!1,rowId:"id",processing:!0,serverSide:!0,searching:!1,lengthMenu:!1,order:[[2,"asc"]],columnDefs:[{targets:[6],orderable:!1}],columns:[{data:"numOrder"},{data:"supplier"},{data:"dateOrder"},{data:"dateDelivery"},{data:"responsible"},{data:"status",className:"status",render:function(t){return"<span class='status-badge'>"+Translator.trans(t,[],"order_status")+"</span>"}},{className:"actions-btn",render:function(t,n,a){var e=a.id,r="<div> <button type='button' class='btn blue  detail-btn'><span class='glyphicon glyphicon-eye-open'></span>"+Translator.trans("see",[],"messages")+'</button> <button class="btn waves-effect btn-default btn-icon btn-download text-black dropdown-button"\n                            data-activates="dropdown-download-detail-'+e+'">\n                        <span>'+Translator.trans("btn.download")+' </span>\n                    </button>\n                    <ul id="dropdown-download-detail-'+e+'" class="dropdown-content">\n                        <li>\n                            <a class="strech_btn text-black" href="'+Routing.generate("download_order",{order:e,download:1})+'" id="export-detail-xls">\n                                <img src="'+xlsImagePath+'"\n                                     style="height: 25px"\n                                     alt="'+Translator.trans("btn.download")+" "+Translator.trans("btn.download_xls")+'"/>\n                                <span style="color: #000;">'+Translator.trans("btn.download_xls")+'</span>\n                            </a></li>\n                        <li>\n                            <a class="strech_btn text-black" href="'+Routing.generate("download_order",{order:e,download:2})+'" id="export-detail-pdf">\n                                <img src="'+pdfImagePath+'"\n                                     style="height: 25px"\n                                     alt="'+Translator.trans("btn.download")+" "+Translator.trans("btn.download_pdf")+'"/>\n                                <span style="color: #000;">'+Translator.trans("btn.download_pdf")+"</span>\n                            </a>\n                        </li>\n                    </ul></div>";return r}}],ajax:{url:Routing.generate("pending_list"),data:function(t){return t.criteria={supplier:$("#supplier").val(),num_order:$("#num_order").val(),ca:$("#ca").val(),date_order:$("#date_order").val(),date_delivery:$("#date_delivery").val(),status:$("#status").val()},t},type:"post"},createdRow:function(t,n){$(t).addClass(n.status)},initComplete:function(t,n){$(".dropdown-button").each(function(){$(this).dropdown()})}})}),$(document).on("click",".detail-btn",function(){var t=$(this).parentsUntil("tbody","tr").attr("id");loader.show(),ajaxCall({url:Routing.generate("details_order",{order:t}),dataType:"json"},function(t){loader.hide(),showDefaultModal("",t.data,"","95%","95%")})}),$(document).on("click",".cancel-btn",function(){var t=$(this).attr("order-id");cancelOrder(t)}),$(document).on("click",".mark-as-sended-btn",function(){var t=$(this),n=$(this).parentsUntil("tbody","tr").attr("id");loader.show(),ajaxCall({url:Routing.generate("mark_as_sended",{order:n}),dataType:"json"},function(n){if(n.data){var a=t.parentsUntil("tbody","tr");a.removeClass("unsended"),a.addClass("sended"),a.find(".status").html(Translator.trans("sended",[],"order_status")),t.remove()}loader.hide()})}),$(function(){$("#reset-filter").on("click",function(){resetFilter($(".filter-zone"))}),$("#export-btn").on("click",function(){submitExportDocumentFile(".filter-zone",list,Routing.generate("pending_list",{download:1}))}),$("#export-xls").on("click",function(){submitExportDocumentFile(".filter-zone",list,Routing.generate("pending_list",{download:2}))}),showEntityDetailsWhenDocumentReady("details_order","order","")});