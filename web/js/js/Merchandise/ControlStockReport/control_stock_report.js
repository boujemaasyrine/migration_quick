function calculateReport(e,t){$("#export-rapport-link").attr("href","#"),$("#export-excel-link").attr("href","#"),$("#generate-btn").attr("disabled","disabled"),progressTimeInterval=window.setInterval(function(){progressBarSuivi(e,progressTimeInterval,"#report-progress",function(e){return e.progress+"% ("+e.proceeded+"/"+e.total+" "+Translator.trans("product_label")+")"},function(){ajaxCall({url:Routing.generate("get_result",{tmp:t})},function(e){$("#generate-btn").removeAttr("disabled"),$(".btn-export").removeAttr("disabled"),$("#data-zone").html(e.html),$("#export-rapport-link").attr("href",Routing.generate("export_control_stock_pdf",{tmp:t})),$("#export-excel-link").attr("href",Routing.generate("export_excel",{tmp:t})),$("#progress-bars-container").hide(),$("#progress-bars-container .progress-bar").css("width","0%"),fixTableHeaderWidth("#constrol-stock-table"),fixMyHeader("#constrol-stock-table",function(e){fixTableHeaderWidth(e)})})})},1e3)}var progressTimeInterval;$(function(){function e(){loader.unblock(),apiLoader.blockApiLoader(),$.ajax({url:Routing.generate("import_recent_tickets"),success:function(){apiLoader.unblockApiLoader()}})}e(),$("#generate-btn").on("click",function(){if($("#generate-btn").attr("disabled",!0),$(".btn-export").attr("disabled",!0),$("#progress").show(),""!=$("#form_startDate").val().trim()&&""!=$("#form_endDate").val().trim()){var e=moment($("#form_startDate").val().trim(),"DD/MM/YYYY"),t=moment($("#form_endDate").val().trim(),"DD/MM/YYYY");e.diff(t,"days")>0||ajaxCall({url:Routing.generate("control_stock_report"),method:"POST",data:$("form[name='form']").serialize(),dataType:"json"},function(e){void 0!=e.error?$("#body").prepend(e.htmlMessage):void 0!=e.progressID&&($("#progress-bars-container").show(),calculateReport(e.progressID,e.tmpID))})}});var t=moment(),r=t.subtract(1,"d"),a=$("#form_startDate").pickadate("picker"),o=$("#form_endDate").pickadate("picker");a.set("disable",[{from:-3e3,to:[r.year(),r.month(),r.date()]}]),o.set("disable",[{from:-3e3,to:[r.year(),r.month(),r.date()]}])}),$(document).on("click",".cat-tr",function(){$(this).siblings(".product-tr[cat-id='"+$(this).attr("cat-id")+"']").slideToggle()});