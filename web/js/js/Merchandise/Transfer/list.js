var listTransfer=null,restList=null;$(function(){listTransfer=initSimpleDataTable("#transfer-table",{lengthChange:!1,rowId:"id",processing:!0,serverSide:!0,searching:!1,lengthMenu:!1,order:[[3,"desc"]],columnDefs:[{targets:[5],orderable:!1}],columns:[{data:"num"},{data:"type",render:function(t){return Translator.trans(t)}},{data:"restaurant"},{data:"date"},{data:"val",render:function(t){return floatToString(t)}},{className:"actions-btn",render:function(t,e,r){var n="<button type='button' class='btn blue  detail-btn'><span class='glyphicon glyphicon-eye-open'></span> &nbsp;"+Translator.trans("see")+"</button>";return n}}],ajax:{url:Routing.generate("transfer_list"),data:function(t){return t.criteria=serializeArrayToObjectByKey($("#filter-form").serializeArray(),"name"),t},type:"post"}}),$("#reset-filter").on("click",function(){resetFilter($(".filter-zone")),restList.clear()}),$("#export-btn").on("click",function(){submitExportDocumentFile("#filter-form",listTransfer,Routing.generate("download_transfers_file",{type:1}))}),$("#export-xls").on("click",function(){submitExportDocumentFile("#filter-form",listTransfer,Routing.generate("download_transfers_file",{type:2}))}),restList=$("select[name=restaurant]").selectize(),restList=restList[0].selectize,showEntityDetailsWhenDocumentReady("transfer_details","transfer",Translator.trans("transfer_details"))}),$(document).on("click",".detail-btn",function(){var t=$(this).parentsUntil("tbody","tr").attr("id");loader.show(),ajaxCall({url:Routing.generate("transfer_details",{transfer:t}),dataType:"json"},function(t){showDefaultModal(Translator.trans("transfer_details"),t.data,"","95%","95%"),loader.hide()})});