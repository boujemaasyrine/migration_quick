$(function(){cashboxCounts=initSimpleDataTable("#cashbox_counts_table",{rowId:"id",processing:!0,serverSide:!0,searching:!0,pageLength:10,order:[[6,"desc"]],columns:[{data:"date"},{data:"owner"},{data:"cashier"},{data:"realCaCounted"},{data:"theoricalCa"},{data:"difference"},{data:"createdAt"},{data:null,className:"actions-btn",render:function(t,a,e){var o=$("#cashbox_counts_table").attr("data-template");if(isNaN(parseInt(t.scId))){var n=$("#cashbox_counts_table").attr("data-delete");return o+""+n}return o}}],ajax:{url:Routing.generate("cashbox_list_json"),data:function(t){return t.criteria=serializeArrayToObjectByKey($("#filterCasbocCountsForm").serializeArray(),"name"),t},type:"post"}}),$("#reset-filter").on("click",function(){resetFilter($(".filter-zone")),cashboxCounts.ajax.reload()}),$("#export-btn").on("click",function(){submitExportDocumentFile(".filter-zone",cashboxCounts,Routing.generate("cashbox_list_json",{download:1}))}),$(document).on("click",".detail-btn",function(){loader.show();var t=$(this).parentsUntil("tbody","tr").attr("id");ajaxCall({url:Routing.generate("cashbox_count_detail",{cashboxCount:t}),type:"json"},function(t){showDefaultModal(Translator.trans("cashbox.listing.details"),t.data,t.dataFooter,"90%"),loader.hide()},function(t){loader.hide()})}),$(document).on("click",".delete-cashbox",function(){var t=($(this),$(this).parentsUntil("tbody","tr").attr("id")),a=Routing.generate("delete_cashbox_count",{cashboxCount:t});bootbox.prompt({title:Translator.trans("cashbox.delete_message"),size:"small",message:Translator.trans("popup.do_you_confirm_this_action"),closeButton:!1,inputType:"password",buttons:{confirm:{label:Translator.trans("shortcut.labels.confirm"),className:"btn-validate margin-right-left"},cancel:{label:Translator.trans("shortcut.labels.cancel"),className:"btn-default margin-right-left"}},callback:function(t){null!==t&&(loader.block(),ajaxCall({url:a,method:POST,data:{password:t}},function(t){void 0==t.errors&&1==t.deleted?(Notif.success(Translator.trans("cashbox_success_deleted")),location.reload()):t.deleted==-1?Notif.alert(Translator.trans("envelope.wrong_password")):2==t.deleted?Notif.alert(Translator.trans("cashbox.counted")):Notif.alert(Translator.trans("cashbox.cant_be_deleted")),loader.unblock()},function(t){Notif.alert(Translator.trans("cashbox.cant_be_deleted")),loader.unblock()},null,!1))}})})});