$(function(){envelopes=initSimpleDataTable("#envelopes_table",{rowId:"id",processing:!0,serverSide:!0,searching:!0,order:[[1,"desc"]],columns:[{data:"number"},{data:"date"},{data:"amount"},{data:"sousType"},{data:"reference"},{data:"owner"},{data:"status"},{data:null,orderable:!1,render:function(e,t,a){if(!isNaN(e.id)&&isNaN(parseInt(e.chestCount))){var n=$("#envelopes_table").attr("data-template");return n=n.replace(/_id_/g,e.id)}return"<span></span>"},targets:0}],ajax:{url:Routing.generate("envelope_ticket_json_list"),data:function(e){return e.criteria=serializeArrayToObjectByKey($("#filterEnvelopeForm").serializeArray(),"name"),e},type:"post"}}),$("#reset-filter").on("click",function(){resetFilter($(".filter-zone")),envelopes.ajax.reload()}),$("#export-btn").on("click",function(){submitExportDocumentFile(".filter-zone",envelopes,Routing.generate("envelope_ticket_json_list",{download:1}))}),$(document).on("click",".removeEnvelope",function(){var e=$(this),t=$(this).attr("data-delete-url");bootbox.confirm({title:Translator.trans("envelope.delete_message"),message:Translator.trans("popup.do_you_confirm_this_action"),closeButton:!1,buttons:{confirm:{label:Translator.trans("keyword.yes"),className:"btn-validate margin-right-left"},cancel:{label:Translator.trans("keyword.no"),className:"btn-default margin-right-left"}},callback:function(a){a&&(loader.block(),ajaxCall({url:t,method:DELETE},function(t){void 0==t.errors&&1==t.status?(envelopes.row(e.closest("tr")).remove().draw(),Notif.success(Translator.trans("envelope.deleted_with_success"))):Notif.alert(Translator.trans("envelope.cant_be_deleted")),loader.unblock()},function(e){Notif.alert(Translator.trans("envelope.cant_be_deleted")),loader.unblock()},null,!1))}})})});