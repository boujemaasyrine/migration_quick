$(function(){var e=$("#planning_table_body"),n=$("#PlanningSupplierForm");$(".selectize").selectize({plugins:["remove_button"]}),$(document).on("change","#supplier_planning_supplier",function(){loader.show();var n=$("#supplier_planning_supplier option:selected").val();ajaxCall({url:Routing.generate("planning",{supplier:n}),dataType:"json"},function(n){"undefined"!=typeof n.data&&0!=n.data.length?(e.empty(),e.attr("data-count",n.data[0]),e.append(n.data[1]),$(".selectize").selectize({plugins:["remove_button"]}),$("#add_planning_supplier").removeAttr("style"),$("#confirm_button").removeAttr("style"),$(".body-planning-supplier").attr("data-prototype",n.data.prototype)):Notif.alert(Translator.trans("error.general.internal"),500,3e3),loader.hide()})}),$(document).on("click","#add_planning_supplier",function(){var n=parseInt(e.attr("data-count")),t="supplier_planning_planning_"+n+"_categories";e.attr("data-count",n+1);var a=e.attr("data-prototype").replace(/_id_/g,n).replace(/_rank_/g,n+1);$(".body-planning-supplier").append(a),$("#"+t).selectize({plugins:["remove_button"]})}),$(document).on("click","#validate_planning_supplier",function(){supplierId=$("#supplier_planning_supplier option:selected").val(),n.attr("action",Routing.generate("planning",{supplier:supplierId})),n.submit()}),$(document).on("click","#cancel_planning_supplier",function(){event.preventDefault(),showDefaultModal(Translator.trans("provider.planning.cancel"),$("#modal_cancel_body").html(),$("#modal_cancel_footer").html())}),$(document).on("click","#cancel_yes_button",function(){e.empty(),$("#add_planning_supplier").attr("style","display:none"),$("#confirm_button").attr("style","display:none"),$("#supplier_planning_supplier").removeAttr("disabled")}),$(document).on("click",".btn-delete-planning-line",function(){loader.show(),null==$(this).parentsUntil("tbody","tr").attr("id")?$(this).parentsUntil("tbody","tr").remove():(lineId=$(this).parentsUntil("tbody","tr").attr("id"),ajaxCall({url:Routing.generate("delete_line_planning",{line:lineId}),dataType:"json"},function(e){"undefined"!=typeof e.errors&&e.errors.length>0?Notif.alert(Translator.trans("provider.planning.js.error"),500,3e3):showDefaultModal(Translator.trans("provider.planning.delete"),e.html)})),loader.hide()}),$(document).on("click",".form_delete_button",function(){loader.show();var n=$(this).attr("id");ajaxCall({url:Routing.generate("delete_line_planning",{line:n}),dataType:"json",method:"post"},function(t){"undefined"!=typeof t.errors&&t.errors.length>0?Notif.alert(Translator.trans("provider.planning.js.error"),500,3e3):($("#default-modal-box").modal("toggle"),e.attr("data-count",t.resForm[0]),e.empty(),e.append(t.resForm[1]),$(".selectize").selectize({plugins:["remove_button"]}),$("#"+n).remove(),Notif.alert(Translator.trans("provider.planning.js.success"),500,3e3))}),loader.hide()})});