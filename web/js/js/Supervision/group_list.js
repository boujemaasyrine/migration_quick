$(function(){function a(a){o.html(a.data[0]),t.html(a.data[2]),r.siblings(".panel-body").slideToggle();var e=list_groups.row.add([a.data[1].id,a.data[1].nameFR,a.data[1].nameNL,1==a.data[1].foodCost?Translator.trans("keyword.yes"):Translator.trans("keyword.no"),a.data[1].btn]).draw().node();$(e).attr("id",a.data[1].id)}var t=$("#AddGroupForm"),o=$("#modal-group-added"),r=$(".filter-zone .panel-heading");list_groups=initSimpleDataTable("#groups_list_table",{searching:!0,pageLength:10,lengthChange:!0,aoColumnDefs:[{bSortable:!1,aTargets:[2]},{width:"15%",aTargets:[2]},{width:"20%",aTargets:[0]},{sClass:"actions-btn",aTargets:[2]}]}),$(document).on("click","#plus-group-button",function(o){loader.show(),ajaxCall({url:Routing.generate("groups_list"),method:POST,data:t.serialize()},function(o){void 0===o.errors&&void 0===o.formError?(a(o),showDefaultModal(Translator.trans("group.list.add_success"),Translator.trans("list.group.message_add_success",{name:o.data[1].name}))):t.html(o.formError[0]),loader.hide()})}),$(document).on("click","#edit-group-button",function(o){loader.show(),group=t.attr("class");$("#edit_restaurant_button_"+group);ajaxCall({url:Routing.generate("groups_list",{group:group}),method:POST,data:t.serialize()},function(o){void 0===o.errors&&void 0===o.formError?(list_groups.row($("#"+group)).remove().draw(),a(o),showDefaultModal(Translator.trans("group.list.edit_success"),Translator.trans("list.group.message_edit_success",{name:o.data[1].name})),$(".panel-heading").html('<span class="glyphicon glyphicon-plus"></span> '+Translator.trans("group.list.add"))):t.html(o.formError[0]),loader.hide()})}),$(document).on("click",".glyphicon-edit",function(){loader.show();var a=$(this).parentsUntil("tbody","tr").attr("id");ajaxCall({url:Routing.generate("groups_list",{group:a}),dataType:"json"},function(o){return"undefined"!=typeof o.data&&0!=o.data.length?(t.html(o.data[0]),t.removeAttr("class"),t.addClass(a),$(".panel-heading").html('<span class="glyphicon glyphicon-edit"></span> '+Translator.trans("group.list.edit")),$("label").addClass("active"),r.siblings(".panel-body").is(":hidden")&&r.siblings(".panel-body").slideToggle(),$("html,body").animate({scrollTop:0},1200),!1):void Notif.alert(Translator.trans("error.general.internal"),500,3e3)}),loader.hide()}),$(document).on("click",".detail-btn",function(a){var t=$(this).parentsUntil("tbody","tr").attr("id");loader.show(),ajaxCall({url:Routing.generate("group_detail",{group:t}),type:"json"},function(a){showDefaultModal(Translator.trans("group.list.details"),a.data),loader.hide()})}),$(document).on("click",".glyphicon-remove",function(){var a=$(this).parentsUntil("tbody","tr").attr("id");loader.show(),ajaxCall({url:Routing.generate("delete_group",{group:a}),dataType:"json"},function(a){if("undefined"!=typeof a.errors&&a.errors.length>0){var t="<div class='alert alert-danger'>"+Translator.trans(a.errors[0])+"</div>";showDefaultModal(Translator.trans("group.list.delete"),t)}else showDefaultModal(Translator.trans("group.list.delete"),a.html);loader.hide()})}),$(document).on("click","#btn-cancel-edit",function(){var a="<h2>"+Translator.trans("cancel.confirmation.content")+"</h2>",t="<div class='row'><div class='col col-lg-12 col-md-12 col-xs-12 col-sm-12' style='text-align: right'><button type='button' id='btn-yes-cancel-edit' class='btn waves-effect waves-light blue' data-dismiss='modal'>"+Translator.trans("yes_confirm")+"</button><button type='button' class='btn btn-cancel' data-dismiss='modal' style='margin-right: 10px'>"+Translator.trans("btn.close")+"</button></div>";showDefaultModal(Translator.trans("cancel.confirmation.title"),a,t)}),$(document).on("click","#btn-yes-cancel-edit",function(){loader.show(),ajaxCall({url:Routing.generate("groups_list")},function(a){void 0===a.errors?(t.html(a.data[0]),r.siblings(".panel-body").slideToggle(),$(".panel-heading").html('<span class="glyphicon glyphicon-plus"></span> '+Translator.trans("group.list.add"))):Notif.alert(Translator.trans("error.general.internal"),500,3e3)}),loader.hide()}),$("#export-btn").on("click",function(){submitExportDocumentFile(".filter-zone",list_groups,Routing.generate("groups_list_export"))})});