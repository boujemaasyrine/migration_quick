$(function(){notifications=initSimpleDataTable("#notifications_table",{rowId:"id",processing:!0,serverSide:!0,searching:!1,columns:[{data:"message",className:"actions-btn",render:function(t,a,e){var n=e.message;return n+="<a href='"+Routing.generate("delete_notification",{instance:e.id})+"' class='btn btn-delete btn-icon btn-xs pull-right' style='margin-left:7px;'> "+Translator.trans("btn.delete")+"</a>","NONEXISTENT_PLU_CODE_NOTIFICATION"!=e.type_&&(n+="<a href='"+Routing.generate("see_notification",{instance:e.id})+"' class='btn btn-view btn-icon detail-btn btn-xs pull-right'> "+Translator.trans("btn.view")+"</a>"),n}}],ajax:{url:Routing.generate("notifications_json_list"),data:function(t){return t.criteria=serializeArrayToObjectByKey($("#filterNotificationForm").serializeArray(),"name"),t},type:"post"},rowCallback:function(t,a,e){0==a.seen&&$(t).attr("class","not-seen"),$(t).attr("data-class",a.type),$(t).attr("data-value",a.message),$(t).attr("data-seen",a.seen),$(t).attr("data-id",a.id),$(t).attr("data-icon",a.icon),$(t).attr("data-created",a.created),null==instance||instance!=a.id?$(t).attr("class","hidden"):$(t).attr("class","open")},fnDrawCallback:function(t){var a=$("#notifications_table > tbody > tr"),e=[];a.each(function(){var t=$(this);if(void 0!=t.attr("data-id")&&e.indexOf(t.attr("data-id"))==-1){e.push(t.attr("data-id"));var a='<tr style="cursor:pointer; !important;" data-id="'+t.attr("data-id")+'" data-name="'+t.attr("data-value")+'" class="details ';"false"==t.attr("data-seen")&&(a+="not-seen"),a+='"><td colspan="5" style="font-size: 16px"><span class="label label-info pull-right" style="color: #ffffff !important; margin: 0; font-size: 85%;">'+t.attr("data-created")+'</span><em class="fa '+t.attr("data-icon")+' fa-comment mr"></em>'+t.attr("data-class")+"</td></tr>",t.before(a)}})}}),$(document).on("click",".details",function(){var t=$(this),a=t.attr("data-id");$("#notifications_table > tbody  > tr").each(function(){!$(this).hasClass("details")&&$(this).attr("data-id")==a&&$(this).hasClass("hidden")?($(this).removeClass("hidden"),$(this).addClass("open"),t.hasClass("not-seen")&&(t.removeClass("not-seen"),ajaxCall({url:Routing.generate("see_notification",{instance:t.attr("data-id")}),dataType:"json",method:"get"}))):$(this).hasClass("details")||$(this).attr("data-id")!=a||($(this).addClass("hidden"),$(this).removeClass("open"))})})});