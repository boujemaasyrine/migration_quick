$(function(){var a={dtWaitingId:"withdrawals_table_waiting",dtInprogressId:"withdrawals_table",dtWaiting:$("#withdrawals_table_waiting").DataTable(),dtInprogress:$("#withdrawals_table").DataTable(),iconClassInprogress:"fa-spinner fa-pulse fa-3x fa-fw",classHidden:"hidden",classFailed:"fa-times fa-3x fa-fw",successColor:"#84f30a2b",errorColor:"#e4202045",alertClassError:"alert-danger",alertClassSuccess:"alert-success",validation:function(t,s){this.validationInProgress(t),this.setStatusToBtnValidation(t,"disabled"),$.ajax({method:"POST",url:s,data:{id:t},dataType:"json",success:function(s){1==s.success?a.validationSuccess(t,s):a.validationError(t)},error:function(s){a.validationError(t)}})},moveToInProgress:function(a){var t=this.dtWaiting.row($("tr[data-w-id="+a+"] ")).data(),s=this.dtInprogress.row.add([t[1],t[2]]).draw().node();$(s).css("background-color",this.successColor)},removeFromWaiting:function(a){this.dtWaiting.row($("tr[data-w-id="+a+"] ")).remove().draw()},validationSuccess:function(a,t){this.moveToInProgress(a),this.removeFromWaiting(a),this.addValidationAlert(this.alertClassSuccess,Translator.trans("fund_management.withdrawal.entry.modal_withdrawal_validated_success")),this.createEnvelopeForm(t)},validationError:function(a){$("tr[data-w-id="+a+"]").css("background-color",this.errorColor),this.addErrorIcon(a),this.addValidationAlert(this.alertClassError,Translator.trans("fund_management.withdrawal.entry.modal_withdrawal_validated_error")),this.setStatusToBtnValidation(a,!1)},validationInProgress:function(a){this.addInprogressIcon(a)},setStatusToBtnValidation:function(a,t){var s;$("tr[data-w-id] td button.validation").each(function(){s=$(this).closest("tr[data-w-id]"),s.data("w-id")!=a&&$(this).attr("disabled",t)})},removeIcon:function(a,t){$("#"+this.$dtWaitingId+" tr[data-w-id="+a+"] i").removeClass(t)},addInprogressIcon:function(a){var t=$("#"+this.dtWaitingId+" tr[data-w-id="+a+"] td i");t.hasClass(this.classHidden)&&t.removeClass(this.classHidden),t.hasClass(this.classFailed)&&t.removeClass(this.classFailed),t.addClass(this.iconClassInprogress)},addErrorIcon:function(a){var t=$("#"+this.dtWaitingId+" tr[data-w-id="+a+"] i");console.log(t),t.hasClass(this.iconClassInprogress)&&t.removeClass(this.iconClassInprogress),t.addClass(this.classFailed)},addValidationAlert:function(a,t){$(".validation-alert").hasClass(this.classHidden)&&$(".validation-alert").removeClass(this.classHidden),$(".validation-alert div.alert").hasClass(this.alertClassSuccess)&&$(".validation-alert div.alert").removeClass(this.alertClassSuccess),$(".validation-alert div.alert").hasClass(this.alertClassError)&&$(".validation-alert div.alert").removeClass(this.alertClassError),$(".validation-alert div.alert").addClass(a),$(".validation-alert div.alert").text(t)},createEnvelopeForm:function(a){var t=Translator.trans("fund_management.withdrawal.entry.modal_withdrawal_set_title"),s="<h3>"+Translator.trans("fund_management.withdrawal.entry.new_envelope")+"</h3>",i=a.data.footer_btn;showDefaultModal(t,s,i,null,null,!1)}},t=function(){var a=Translator.trans("api_loader_withdrawal_msg")+"...",t=$("#loading-text");t.text(a),t.attr("data-text",a)};t(),$(".validation").click(function(){var t=$(this).closest("tr").data("w-id"),s=$("#"+a.dtWaitingId).data("url");a.validation(t,s)})});