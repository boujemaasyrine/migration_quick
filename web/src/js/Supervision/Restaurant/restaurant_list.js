$(function(){function t(){var t=$(".opening_date");if(""!==t.val())t.attr("readonly",!0);else{var e=moment();fiscalDatepicker=initDatePicker(".opening_date",{min:e})}}$("#AddRestaurantForm");$(".selectize").selectize({plugins:["remove_button"]});var e=($("#modal-restaurant-added"),$(".filter-zone .panel-heading"),initSimpleDataTable("#restaurant_list_table",{searching:!0,aoColumnDefs:[{bSortable:!1,aTargets:[8]},{sClass:"actions-btn nowrap",aTargets:[8]}],order:[[7,"asc"]]}));$(document).on("click",".detail-btn",function(t){var e=$(this).parentsUntil("tbody","tr").attr("id");loader.show(),ajaxCall({url:Routing.generate("restaurant_detail",{restaurant:e}),type:"json"},function(t){showDefaultModal(Translator.trans("restaurant.list.details"),t.data,t.footerBtn,"95%"),initSimpleDataTable("#supplier_resto_list_table",{lengthChange:!1,searching:!1,pageLength:5}),loader.hide()})}),$(document).on("click",".btn-remove-restaurant",function(){var t=$(this).attr("data-restaurant-id");loader.show(),ajaxCall({url:Routing.generate("delete_restaurant",{restaurant:t}),dataType:"json"},function(t){if("undefined"!=typeof t.errors&&t.errors.length>0){var e="<div class='alert alert-danger'>"+Translator.trans(t.errors[0])+"</div>";showDefaultModal(Translator.trans("restaurant.list.delete"),e)}else showDefaultModal(Translator.trans("restaurant.list.delete"),t.html);loader.hide()})}),$(document).on("click","#btn-cancel-edit",function(){var t="<h2>"+Translator.trans("cancel.confirmation.content")+"</h2>",e="<div class='row'><div class='col col-lg-12 col-md-12 col-xs-12 col-sm-12' style='text-align: right'><button type='button' id='btn-yes-cancel-edit' class='btn waves-effect waves-light blue' data-dismiss='modal'>"+Translator.trans("yes_confirm")+"</button><button type='button' class='btn btn-cancel' data-dismiss='modal' style='margin-right: 10px'>"+Translator.trans("btn.close")+"</button></div>";showDefaultModal(Translator.trans("cancel.confirmation.title"),t,e)}),$(document).on("click","#btn-yes-cancel-edit",function(){$(location).attr("href",Routing.generate("restaurants_list"))}),$("#export-restaurant-btn").on("click",function(){submitExportDocumentFile(".filter-zone",e,Routing.generate("supervision_restaurant_list_export"))}),$(document).on("click",".parameters-btn",function(){var t=$(this).parentsUntil("tbody","tr").attr("id");loader.show(),ajaxCall({url:Routing.generate("restaurant_parameters",{restaurant:t})},function(t){if(void 0===t.errors){var e=Translator.trans("restaurant_parameter.title",{restaurant:t.restaurantName});showDefaultModal(e,t.formView,t.btn,"95%")}else Notif.alert(Translator.trans("error.general.internal"),500,3e3);loader.hide()})}),$(document).on("click","#save-parameters",function(){loader.show();var t,e=$(this).attr("data-restaurant"),a=$("#parameter-restaurant-form");ajaxCall({url:Routing.generate("restaurant_parameters",{restaurant:e}),method:POST,data:a.serialize()},function(e){if(void 0===e.errors&&void 0===e.formError){t=Translator.trans("success");var a=Translator.trans("restaurant_parameter.update_success",{restaurant:e.restaurantName});showDefaultModal(t,a,null,"50%")}else t=Translator.trans("restaurant_parameter.title",{restaurant:e.restaurantName}),showDefaultModal(t,e.formView,e.btn,"95%");loader.hide()})}),$(document).on("change","#parameters_restaurant_paymentMethod_1",function(){$(".check-quick-children").slideToggle(),1==$(this).prop("checked")?$(".check-quick-children :input").each(function(){$(this).prop("checked",!0)}):$(".check-quick-children :input").each(function(){$(this).prop("checked",!1)})}),$(document).on("change","#parameters_restaurant_paymentMethod_3",function(){$(".bank-card-children").slideToggle(),1==$(this).prop("checked")?$(".bank-card-children :input").each(function(){$(this).prop("checked",!0)}):$(".bank-card-children :input").each(function(){$(this).prop("checked",!1)})}),$(document).on("change","#parameters_restaurant_paymentMethod_4",function(){$(".ticket-paper-children").slideToggle(),1==$(this).prop("checked")?$(".ticket-paper-children :input").each(function(){$(this).prop("checked",!0)}):$(".ticket-paper-children :input").each(function(){$(this).prop("checked",!1)})}),$(document).on("change","#parameters_restaurant_paymentMethod_5",function(){$(".ticket-electronic-children").slideToggle(),1==$(this).prop("checked")?$(".ticket-electronic-children :input").each(function(){$(this).prop("checked",!0)}):$(".ticket-electronic-children :input").each(function(){$(this).prop("checked",!1)})});var a=$('[name="restaurant[active]"]');a.change(function(){var e=$(this).closest("form"),a={},r=$("#section-for-active-restaurant");a[$(this).attr("name")]=$('[name="restaurant[active]"]:checked').val(),a.validation=!1,loader.show(),$.ajax({url:e.attr("action"),type:"post",data:a,success:function(e){console.log(e),r.replaceWith($(e).find("#section-for-active-restaurant")),t(),loader.hide()},error:function(){}})})});