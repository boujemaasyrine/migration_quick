$(function(){function e(){loader.unblock(),apiLoader.blockApiLoader(),$.ajax({url:Routing.generate("import_recent_tickets"),success:function(){apiLoader.unblockApiLoader()}})}function t(){var e=$("#portion_control_filter_code");e.autocomplete({autoFill:!0,source:function(e,t){var n,o,a=e.term;return(n=a,n in r)?void t(r[o=a,o]):void ajaxCall({url:Routing.generate("find_active_products",{code:a,selectedType:type}),method:GET},function(e){var n,o;void 0==e.errors&&(r[n=a,n]=$.map(e.data[0],function(e){return{id:e.id,name:e.name,label:e.externalId+"- "+e.name,value:e.externalId,externalId:e.externalId}}),t(r[o=a,o]))},null,null,!0)},select:function(e,n){t.val(n.item.name)}});var t=$("#portion_control_filter_name");t.autocomplete({autoFill:!0,source:function(e,t){var n,o,a=e.term;return(n=a,n in r)?void t(r[o=a,o]):void ajaxCall({url:Routing.generate("find_active_products",{term:a,selectedType:"article"}),method:GET},function(e){var n,o;void 0==e.errors&&(r[n=a,n]=$.map(e.data[0],function(e){return{id:e.id,name:e.name,label:e.name,value:e.name,externalId:e.externalId}}),t(r[o=a,o]))},null,null,!0)},select:function(t,n){e.val(n.item.externalId)}})}function n(e){return e}$(document).on("keyup","#searchOnReport",function(){var e,t,n=$(this).val().toString().toUpperCase();$("#portionControlTable tbody tr").each(function(e,t){if(!$(t).hasClass("category_name")){var o=$($(t).children("td")[0]).text().toString().toUpperCase().trim(),a=$($(t).children("td")[1]).text().toString().toUpperCase().trim(),i=RegExp(".*"+n+".*","g");o.match(i)||a.match(i)?$(t).removeClass("hidden"):$(t).addClass("hidden")}}),e=(t=$("#portionControlTable")).find("tbody.mainTbody tr.mainRow:not(.hidden):first").children().map(function(){return $(this).innerWidth()}).get(),t.find("thead tr.mainHeader").children().each(function(t,n){$(n).width(e[t])})}),fixMyHeader("#portionControlTable")});