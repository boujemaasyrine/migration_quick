function setInputValue(e,t){$(e).siblings("label[for="+$(e).attr("id")+"]").addClass("active"),$(e).val(t)}function resetInputValue(e){$(e).val(""),$(e).siblings("label[for="+$(e).attr("id")+"]").removeClass("active")}function resetCheckboxValue(e){$(e).prop("checked",!1)}function highlightInput(e,t){$(e).addClass(t),$(e).on("change",function(e){var o=e.currentTarget;""!=$(o).val()&&$(o).removeClass(t)})}function resetFilter(e){var t=$(e).find("input");$.each(t,function(e,t){"checkbox"!=$(this).attr("type")?resetInputValue(t):resetCheckboxValue(t)}),$(e).find("select option").removeAttr("selected")}function serializeArrayToObjectByKey(e,t){var o={};return $.each(e,function(e,n){n.hasOwnProperty(t)&&n.hasOwnProperty("value")&&(o[n[t]]=n.value)}),o}function createAForm(e,t,o,n){var r="<form method='post' id='"+n+"' action='"+o+"'>",a=$(e).find("input");$.each(a,function(e,t){"undefined"!=typeof $(t).attr("name")&&("checkbox"!=$(t).attr("type")||"checkbox"==$(t).attr("type")&&$(t).prop("checked"))&&(r=r+"<input name='criteria["+$(t).attr("name")+"]' value='"+$(t).val()+"' />")}),console.log(r);var i=$(e).find("select");$.each(i,function(e,t){"undefined"!=typeof $(t).attr("name")&&(r=r+"<input name='criteria["+$(t).attr("name")+"]' value='"+$(t).val()+"' />")});var l=t.order()[0];r=r+"<input name='order[0][column]' value='"+l[0]+"' />",r=r+"<input name='order[0][dir]' value='"+l[1]+"' />";var s=t.search();return r=r+"<input name='search[value]' value='"+s+"' />",r+="</form>"}function submitExportDocumentFile(e,t,o){var n=createAForm(e,t,o,"export-form");$(body).append(n),$("#export-form").submit(),$("#export-form").remove()}function searchInArrayByKeyValue(e,t,o){var n;for(n in e){var r=e[n];if(r.hasOwnProperty(t)&&r[t].toString()==o.toString())return r}return null}function floatToString(e,t){if("undefined"==typeof t&&(t=2),null==e)return"";if(e=parseFloat(e),0==t)return Math.trunc(e);var o=e.toFixed(2);for(o=o.toString().replace(".",","),o.indexOf(",")==-1&&(o+=",00");o.substr(o.indexOf(",")+1).length<t;)o+="0";return o.substr(o.indexOf(",")+1).length>t&&(o=o.substr(0,o.indexOf(",")+t+1)),o}function showPopError(e){var t="<div class='alert alert-danger'><span class='glyphicon glyphicon-warning-sign'></span>  "+e+"</div>";$("#error-box-modal").is(":visible")||$("#error-box-modal").modal("show"),$("#error-box-modal .modal-body").append(t)}function closeErrorBox(){$("#error-box-modal").modal("hide"),$("#error-box-modal .modal-body").html("")}function appendErrorMsgTozone(e,t,o){var n="<div id='__id__' class='alert alert-danger form-error' role='alert'> <span class='glyphicon glyphicon-warning-sign'></span> __msg__ </div>",r=n.replace(/__msg__/,t).replace(/__id__/,o);e.append(r)}function clearErrorMsgToZone(e){e.find(".form-error").remove()}function showDetailsInPopUp(e,t){ajaxCall({url:e,type:"json"},function(e){showDefaultModal(t,e.data,"","95%","95%"),loader.hide()})}function showEntityDetailsWhenDocumentReady(e,t,o){var n=window.location.hash;if(""!=n.trim()){var r=n.substr(1);if(""!=r.trim()&&Number.isInteger(parseFloat(r.trim()))){var a=r.trim();loader.show();var i=[];i[t]=a,showDetailsInPopUp(Routing.generate(e,i),o)}}}function rotateElement(e,t){"undefined"!=typeof t?e.removeClass("rotation"):e.addClass("rotation")}function goBack(){window.history.back()}function sortTabByProp(e,t,o){if(0==e.length)return 0;for(var n=e[0],r=0;r<e.length;r++)if(e[r][t].toString().toUpperCase()==o.toString().toUpperCase())return e[0]=e[r],void(e[r]=n)}function progressBarSuivi(e,t,o,n,r){ajaxCall({url:Routing.generate("supervision_progress",{progression:e}),dataType:"json"},function(e){void 0!=e.redirection&&(window.location.href=e.redirection),null==e.result?(clearInterval(t),console.log("clear interval")):($(o).find(".progress-bar").css("width",e.result.progress+"%"),"undefined"==typeof n?$(o).find(".progress-hint .progress-hint-per").html(e.result.progress+"% ("+e.result.proceeded+"/"+e.result.total+" Elements)"):null!=n&&$(o).find(".progress-hint .progress-hint-per").html(n(e.result)),100==parseFloat(e.result.progress)&&($(o).find(".progress-bar").removeClass("active"),$(o).find(".progress-bar").addClass("progress-bar-success"),clearInterval(t),"undefined"!=typeof r&&null!=r&&r()))})}function fixMyHeader(e,t){var o=$(e).find("thead").first();$(window).scroll(function(){var n=$(this).scrollTop(),r=$(e).offset().top;r-n<0?($(o).css("position","fixed"),$(o).css("top",$("#mainNav").height()),void 0!=t&&t(e)):($(o).css("top",0),$(o).css("position","relative"))})}function fixTableHeaderWidth(e){var t=$(e).find("thead").find(".main-header-tr").first().find("td, th"),o=$(e).find("tbody").find(".main-tbody-tr").first().find("td, th");$(e).find("thead").css("width",$(e).find("tbody").outerWidth()+"px"),$.each(o,function(e,n){$(t[e]).css("width",$(n).outerWidth()+"px"),$(o[e]).css("width",$(n).outerWidth()+"px")})}function sortSelect(select){var selected=select.val(),options=select.find("option"),arr=options.map(function(e,t){return{t:$(t).text(),v:t.value}}).get(),empty;null!=selected&&(empty=options.map(function(e,t){if(""==$(t).val())return{t:$(t).text(),v:t.value}}).get()),arr.sort(function(e,t){return e.t>t.t?1:e.t<t.t?-1:0});var x;return x=null!=selected?-1:0,options.each(function(i,o){0==i&&null!=selected?empty.length>0&&(o.value=empty[0].v,$(o).text(empty[0].t)):(o.value=arr[eval(i+x)].v,$(o).text(arr[eval(i+x)].t)),""==arr[i].v&&(x=0)}),select.val(selected),select}function inWorkflow(){var e=!1;return ajaxCall({url:Routing.generate("in_workflow"),async:!1},function(t){e=t},null,null,!0),e}function inAdministrativeClosing(){var e=!1;return ajaxCall({url:Routing.generate("in_administrative_closing"),async:!1},function(t){e=t},null,null,!0),e}function inChestCountAdminClosing(){var e=!1;return ajaxCall({url:Routing.generate("in_chest_count"),async:!1},function(t){e=t["in"]},null,null,!0),e}function nextStep(e,t){var o={};void 0!=e&&(o.targetRouteName=e,void 0!=t&&(o.outRouteOff=t)),window.location.href=Routing.generate("next_in_workflow",o)}function orderMultoSelectWithoutOrderingSelectedOptions(e){var t=[],o=[];$.each(e.find("option"),function(e,n){$(n).is(":selected")?t.push(n):o.push(n)}),o.sort(function(e,t){return $(e).text().toLowerCase()<$(t).text().toLowerCase()?-1:1}),e.find("option").remove(),$.each(t,function(t,o){e.append(o)}),$.each(o,function(t,o){e.append(o)})}function orderMultoSelect(e){var t=[];$.each(e.find("option"),function(e,o){t.push(o)}),t.sort(function(e,t){return $(e).text().toLowerCase()<$(t).text().toLowerCase()?-1:1}),e.find("option").remove(),$.each(t,function(t,o){e.append(o)})}function hasTheRightFor(e){var t=!1;return ajaxCall({url:Routing.generate("has_right",{right:e}),async:!1},function(e){t=e},null,null,!0),t}var GET="GET",POST="POST",PUT="PUT",DELETE="DELETE",initMultiSelect=function(e){$(e).multiselect({sortable:!0,searchable:!1,searchField:!0,filterSelected:!0}),$(".multiselect-available-list .ui-icon-arrowthickstop-1-w").toggleClass("ui-icon-arrowthickstop-1-w ui-icon-arrowthickstop-1-e"),$(".multiselect-selected-list .ui-icon-arrowthickstop-1-e").toggleClass("ui-icon-arrowthickstop-1-w ui-icon-arrowthickstop-1-e")},ajaxCall=function(e,t,o,n,r){var a=Translator.trans("Error.general.internal"),i={method:"GET"};return $.extend(i,e),void 0==r&&(r=!1),t?i.success=function(e){!r&&("object"!=typeof e||"undefined"!=typeof e.errors&&e.errors.length>0)&&Notif.alert(a),void 0!=e.in_workflow&&e.in_workflow?window.location.href=e.redirect_to:t(e)}:r||(i.success=function(e){!r&&("object"!=typeof e||"undefined"!=typeof e.errors&&e.errors.length>0)&&Notif.alert(a)}),o?i.error=function(e,t,n){r||Notif.alert(a),o(e,t,n)}:r||(i.error=function(e){!r&&"undefined"!=typeof e.errors&&e.errors.length>0&&Notif.alert(a)}),n&&(i.complete=n),$.ajax(i)},showGeneralModal=function(e,t,o,n,r){var a=$("#general-modal-box");return"undefined"!=typeof r&&a.addClass("modal-"+n),"undefined"!=typeof r&&a.addClass("modal-"+r),"undefined"!=typeof e&&a.find(".modal-title").html(e),"undefined"!=typeof t&&a.find(".modal-body").html(t),"undefined"!=typeof o&&a.find(".modal-footer").html(o),a.openModal(),a},showDefaultModal=function(e,t,o,n,r,a){var i=$("#default-modal-box");return"undefined"!=typeof n&&$(i).css("width",n),"undefined"!=typeof r&&$(i).css("height",r),i.find(".modal-title").html(e),i.find(".modal-body>p").html(t),i.find(".modal-footer").show(),""==o?i.find(".modal-footer").hide():"undefined"!=typeof o&&null!=o?i.find(".modal-footer").html(o):i.find(".modal-footer").html("<button type='button' class='btn btn-cancel' data-dismiss='modal'>Fermer</button>"),"undefined"==typeof a?i.find(".modal-header .close").show():null!=a&&i.find(".modal-header .close").hide(),i.modal("show"),i},showEmtptyModal=function(e){var t=$("#empty-modal-box");t.html(e),t.modal("show")},showHelpBox=function(){showDefaultModal("<span class='glyphicon glyphicon-info-sign'></span> Aide",$("#aide-box-content").html())},openCloseNavBar=function(){$("#vertical-nav-bar").is(":visible")?$(".nav-bar-container").animate({width:"toggle"},350,function(){$(".show-nav-bar-btn").show(),$("#body").toggleClass("col-lg-10 col-md-9 col-xs-12")}):($(".show-nav-bar-btn").hide(),$("#body").toggleClass("col-lg-10 col-md-9 col-xs-12"),$(".nav-bar-container").animate({width:"toggle"},350,function(){}))};$(function(){moment.locale(Translator.locale),$(".collapse-link").on("click",function(e){$($(this).attr("data-target")).slideToggle()}),$(".modal-trigger").leanModal(),initDatePicker(),$(document).on("mouseenter",".tooltipped",function(e){$(this).attr("data-tooltip-id")||$(this).tooltip()}),$(document).on("mouseenter",".bootstrap_tooltipped",function(e){$(this).attr("data-tooltip-id")||$(this).tootltipBootstrap()}),screen.width<=991&&openCloseNavBar(),$(document).on("click",".filter-zone .panel-heading",function(){$(this).siblings(".panel-body").slideToggle()}),$(document).on("change",".force-modulo-5",function(){var e=$(this).val().replace(",",".");Number(e)==e&&$(this).val(e-e%5)}),$(document).on("change",".parse-float",function(){var e=$(this).val().replace(",",".");$(this).val(e)})}),$.urlParam=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:t[1]||0},$.addParamToUrl=function(e,t,o){var n=new RegExp(t+"=([^&]*)","i").exec();return n=n&&n[1]||"",""==n&&(e+=e.indexOf("?")===-1?"?"+t+"="+o:"&"+t+"="+o),e},$.removeParamToUrl=function(e,t){var o,n=e.split("?")[0],r=[],a=e.indexOf("?")!==-1?e.split("?")[1]:"";if(""!==a){r=a.split("&");for(var i=r.length-1;i>=0;i-=1)o=r[i].split("=")[0],o===t&&r.splice(i,1);n=n+"?"+r.join("&")}return n};var auxParseFloat=parseFloat;parseFloat=function(e){return void 0==e||null==e?e:(e=e.toString(),e.indexOf(".")>0&&e.indexOf(",")>0&&(e=e.replace(".","")),e=e.replace(",","."),e=""===e?0:e,auxParseFloat(e))};var auxIsNaN=isNaN;isNaN=function(e){return"string"==typeof e&&(e=e.replace(/\,/g,".")),auxIsNaN(e)},$(document).on("click",".closeDefaultModal",function(){$("#default-modal-box").modal("hide"),$("#default-modal-box p").html("")}),$(function(){$("select.sortable").each(function(){sortSelect($(this))})}),$(function(){$("form .help-block.has-error").closest(".form-group").addClass("has-error")}),$(".nav ul").each(function(){var e=!0;$(this).find("li").each(function(){$(this).hasClass("hidden")||(e=!1)}),e&&$(this).addClass("hidden")}),$(document).on("click","*[disabled=disabled]",function(){return $(this).blur(),!1});