function getResult(){ajaxCall({url:Routing.generate("synthetic_foodcost_get_result",{tmp:tmp})},function(t){void 0!=t.html&&($("#progress-bars-container").hide(),$("#progress-bars-container").find("#progress-bar").css("width","0%"),$("#data-zone").html(t.html),$("#generate_foodcost_synthetic").attr("disabled",!1),$("#generate_foodcost_synthetic_force").attr("disabled",!1),$(".btn-export").attr("disabled",!1))})}function calculateReport(t,e){$("#data-zone").html(""),progressTimeInterval=window.setInterval(function(){progressBarSuivi(t,progressTimeInterval,"#report-progress",function(t){return t.progress+"%"},function(){tmp=e,getResult()})},1e3)}function launch(t){$("#progress").show(),tmp=null,ajaxCall({url:Routing.generate("synthetic_foodcost_launch_calcul",{force:t}),data:$("#foodCostSynthForm").serialize(),method:"POST"},function(t){t.errors?($("#form-container").html(t.html),initDatePicker(),$("#generate_foodcost_synthetic").attr("disabled",!1),$("#generate_foodcost_synthetic_force").attr("disabled",!1),$(".btn-export").attr("disabled",!1),$("#progress").hide()):null!=t.progressID&&null!=t.tmpID&&($("#progress-bars-container").show(),calculateReport(t.progressID,t.tmpID))})}var tmp=null,progressTimeInterval;$(document).on("click","#generate_foodcost_synthetic",function(){$("#generate_foodcost_synthetic").attr("disabled",!0),$("#generate_foodcost_synthetic_force").attr("disabled",!0),$(".btn-export").attr("disabled",!0),launch(0)}),$(document).on("click","#generate_foodcost_synthetic_force",function(){$("#generate_foodcost_synthetic").attr("disabled",!0),$("#generate_foodcost_synthetic_force").attr("disabled",!0),$(".btn-export").attr("disabled",!0),launch(1)}),$(document).on("click","#export-btn-foodcost",function(){null!=tmp&&(window.location.href=Routing.generate("print_food_cost_synthetic",{tmp:tmp}))}),$(document).on("click","#export-excel-btn-foodcost",function(){null!=tmp&&(window.location.href=Routing.generate("synth_fc_export_excel",{rapport:tmp}))}),$(function(){function t(){loader.unblock(),apiLoader.blockApiLoader(),$.ajax({url:Routing.generate("import_recent_tickets"),success:function(){apiLoader.unblockApiLoader()}})}$("#generate_foodcost_synthetic_force").tootltipBootstrap()}),$(document).on("change","#form_beginDate , #form_endDate",function(){$("#generate_foodcost_synthetic").attr("disabled",!1),$("#generate_foodcost_synthetic_force").attr("disabled",!1),$(".btn-export").attr("disabled",!1)});